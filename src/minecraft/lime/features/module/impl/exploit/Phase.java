package lime.features.module.impl.exploit;

import lime.core.events.EventTarget;
import lime.core.events.impl.EventBoundingBox;
import lime.core.events.impl.EventUpdate;
import lime.features.module.Category;
import lime.features.module.Module;
import lime.features.module.ModuleData;
import lime.features.setting.impl.EnumValue;
import lime.utils.movement.MovementUtils;

@ModuleData(name = "Phase", category = Category.EXPLOIT)
public class Phase extends Module {

    private enum Mode {
        CLIP;
    }

    private final EnumValue mode = new EnumValue("Mode", this, Mode.CLIP);

    @EventTarget
    public void onUpdate(EventUpdate e) {
        if(mc.thePlayer.isCollidedHorizontally) {
            MovementUtils.hClip(0.01);
        } else if(MovementUtils.isInsideBlock()) {
            MovementUtils.hClip(0.3);
            MovementUtils.setSpeed(0);
        }
        if(MovementUtils.isInsideBlock()) mc.thePlayer.motionY = 0;
    }

    @EventTarget
    public void onBB(EventBoundingBox e) {
        if(MovementUtils.isInsideBlock() && mode.is("clip")) {
            e.setBoundingBox(null);
        }
    }
}
